<h1>My memberships</h1>

<h2>Requests sent to join a team</h2>
<% if @memberships_sent.where(status: false).empty? %>
  <p>You haven't sent any requests to join a team</p>
<% else %>
  <% @memberships_sent.each do |sent| %>
    <% if sent.status == false %>
      <%= sent.team.team_name %>
      <%= link_to 'Cancel', team_membership_path(sent.team.id, sent.id), method: :delete %>
    <% end %>
  <% end %>
<% end %>
<br>
<h2>Request recieved to join a team</h2>
<% if @contracts_recived.where(status: false).empty? %>
  <p>You haven't recived any requests to join a team.</p>
  <br>
<% else %>
  <% @contracts_recived.each do |recived| %>
    <% if recived.status == false %>
      <%= recived.team.team_name %>
      <%= link_to 'Acept', update_contract_path(current_user.id, recived.id), method: :patch %>
      <%= link_to 'Reject', destroy_contract_path(recived.user.id, recived.id), method: :delete %>
      <br>
    <% end %>
  <% end %>
  <br>
<% end %>

<% captain_team = Team.find_by(user: current_user) %>
<% if captain_team != nil %>
    <% if @memberships_recived.where(status: false).empty? %>
      <h2>Requests recieved to join your team</h2>
      <p>You don't have any request to join your team.</p>
      <br>
    <% else %>
      <h2>This players want to join your team</h2>
      <% @memberships_recived.each do |recived| %>
            <% if recived.status == false %>
              <%= recived.user.first_name %>
              <%= link_to 'Acept', team_membership_path(recived.team.id, recived.id), method: :patch %>
              <%= link_to 'Reject', team_membership_path(recived.team.id, recived.id), method: :delete %>
              <br>
            <% end %>
          <% end %>
      <br>
    <% end %>

    <% if @contracts_sent.where(status: false).empty? %>
        <h2>Requests sent to player to join your team</h2>
        <p>You haven't request any player to join your team.</p>
        <br>
    <% else %>
    <h2>Requests sent to join your team</h2>
    <% @contracts_sent.each do |sent| %>
            <% if sent.status == false %>
              <%= sent.user.first_name %>
              <%= link_to 'Cancel', destroy_contract_path(sent.user.id, sent.id), method: :delete %>
              <br>
            <% end %>
          <% end %>
    <% end %>
<% end %>
